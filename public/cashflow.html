<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dale Carnegie Command Center - Cash Flow</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: #0d1117;
            min-height: 100vh;
            color: #c9d1d9;
        }
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 250px;
            height: 100vh;
            background: #161b22;
            border-right: 1px solid #30363d;
            padding: 20px;
            z-index: 100;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #30363d;
        }
        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #58a6ff, #a371f7);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
        }
        .logo-text {
            font-size: 1.3em;
            font-weight: 600;
            color: #f0f6fc;
        }
        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            color: #8b949e;
        }
        .nav-item:hover, .nav-item.active {
            background: #21262d;
            color: #f0f6fc;
        }
        .nav-item.active {
            background: #238636;
        }
        .main-content {
            margin-left: 250px;
            padding: 30px;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 1.8em;
            color: #f0f6fc;
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        /* Cash Flow Specific Styles */
        .cashflow-header {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .quarter-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .quarter-btn {
            background: #21262d;
            border: 1px solid #30363d;
            color: #8b949e;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.2s;
        }
        .quarter-btn:hover, .quarter-btn.active {
            background: #238636;
            border-color: #238636;
            color: white;
        }
        
        /* Monthly Columns */
        .months-container {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding-bottom: 20px;
            min-height: 600px;
        }
        .month-column {
            min-width: 280px;
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 12px;
            padding: 15px;
            display: flex;
            flex-direction: column;
        }
        .month-column.current {
            border-color: #238636;
            box-shadow: 0 0 20px rgba(35, 134, 54, 0.2);
        }
        .month-header {
            background: #0d1117;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            text-align: center;
            border: 1px solid #30363d;
        }
        .month-name {
            font-size: 1.1em;
            font-weight: 600;
            color: #f0f6fc;
            margin-bottom: 5px;
        }
        .month-total {
            font-size: 1.5em;
            font-weight: 700;
            color: #3fb950;
        }
        .month-total.zero {
            color: #8b949e;
        }
        .deals-container {
            flex: 1;
            min-height: 300px;
        }
        .deal-card {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            cursor: grab;
            transition: all 0.2s;
        }
        .deal-card:hover {
            border-color: #58a6ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .deal-card.dragging {
            opacity: 0.5;
        }
        .deal-name {
            font-weight: 500;
            color: #f0f6fc;
            font-size: 0.9em;
            margin-bottom: 8px;
            line-height: 1.3;
        }
        .deal-amount {
            font-size: 1.1em;
            font-weight: 600;
            color: #3fb950;
        }
        .deal-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            font-size: 0.8em;
            color: #8b949e;
        }
        .deal-prob {
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75em;
            font-weight: 600;
        }
        .prob-high { background: rgba(35, 134, 54, 0.2); color: #3fb950; }
        .prob-medium { background: rgba(187, 128, 9, 0.2); color: #d29922; }
        .prob-low { background: rgba(218, 54, 51, 0.2); color: #f85149; }
        
        /* Quarter Summary */
        .quarter-summary {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        .summary-card {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        .summary-label {
            font-size: 0.85em;
            color: #8b949e;
            margin-bottom: 8px;
        }
        .summary-value {
            font-size: 1.6em;
            font-weight: 700;
            color: #f0f6fc;
        }
        .summary-value.positive { color: #3fb950; }
        .summary-value.warning { color: #d29922; }
        
        /* Drag and Drop Styles */
        .month-column.drag-over {
            background: rgba(88, 166, 255, 0.1);
            border-color: #58a6ff;
        }
        
        /* Instructions */
        .instructions {
            background: rgba(88, 166, 255, 0.1);
            border: 1px solid #58a6ff;
            border-radius: 8px;
            padding: 12px 15px;
            margin-bottom: 20px;
            font-size: 0.9em;
            color: #58a6ff;
        }
        .instructions strong {
            color: #f0f6fc;
        }
        
        /* Add Deal Button */
        .add-deal-btn {
            width: 100%;
            padding: 10px;
            background: transparent;
            border: 2px dashed #30363d;
            border-radius: 6px;
            color: #8b949e;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.2s;
            margin-top: 10px;
        }
        .add-deal-btn:hover {
            border-color: #238636;
            color: #3fb950;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="logo">
            <div class="logo-icon">ðŸŽ¯</div>
            <div class="logo-text">DC Command</div>
        </div>
        <div class="nav-item" onclick="showTab('pipeline')">
            <span>ðŸ’°</span> Pipeline
        </div>
        <div class="nav-item active" onclick="showTab('cashflow')">
            <span>ðŸ“…</span> Cash Flow
        </div>
        <div class="nav-item" onclick="showTab('dashboard')">
            <span>ðŸ“Š</span> Dashboard
        </div>
    </div>
    
    <div class="main-content">
        <!-- CASH FLOW TAB -->
        <div id="cashflow" class="tab-content active">
            <div class="header">
                <h1>ðŸ“… Cash Flow Forecast</h1>
            </div>
            
            <div class="instructions">
                <strong>ðŸ’¡ How to use:</strong> Drag deals between months to adjust when you expect payment. 
                Monthly totals update automatically. Green border = current month.
            </div>
            
            <!-- Quarter Selector -->
            <div class="cashflow-header">
                <div class="quarter-selector">
                    <button class="quarter-btn active" onclick="showQuarter('q1')">Q1 2026</button>
                    <button class="quarter-btn" onclick="showQuarter('q2')">Q2 2026</button>
                    <button class="quarter-btn" onclick="showQuarter('q3')">Q3 2026</button>
                    <button class="quarter-btn" onclick="showQuarter('q4')">Q4 2026</button>
                </div>
                
                <!-- Quarter Summary -->
                <div class="quarter-summary" id="q1-summary">
                    <div class="summary-card">
                        <div class="summary-label">January</div>
                        <div class="summary-value" id="jan-total">$38,900</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-label">February</div>
                        <div class="summary-value" id="feb-total">$45,750</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-label">March</div>
                        <div class="summary-value" id="mar-total">$111,250</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-label">Q1 Total</div>
                        <div class="summary-value positive" id="q1-total">$195,900</div>
                    </div>
                </div>
            </div>
            
            <!-- Q1 Months -->
            <div class="months-container" id="q1-months">
                <!-- January 2026 -->
                <div class="month-column current" data-month="jan">
                    <div class="month-header">
                        <div class="month-name">January 2026</div>
                        <div class="month-total" id="jan-column-total">$38,900</div>
                    </div>
                    <div class="deals-container" ondrop="drop(event, 'jan')" ondragover="allowDrop(event)">
                        <div class="deal-card" draggable="true" ondragstart="drag(event)" data-deal="tjn" data-amount="27000">
                            <div class="deal-name">Toronto Jewish Network</div>
                            <div class="deal-amount">$27,000</div>
                            <div class="deal-meta">
                                <span>50% probability</span>
                                <span class="deal-prob prob-medium">MED</span>
                            </div>
                        </div>
                        <div class="deal-card" draggable="true" ondragstart="drag(event)" data-deal="sbi" data-amount="11250">
                            <div class="deal-name">SBI Indian Bank</div>
                            <div class="deal-amount">$11,250</div>
                            <div class="deal-meta">
                                <span>25% probability</span>
                                <span class="deal-prob prob-low">LOW</span>
                            </div>
                        </div>
                        <div class="deal-card" draggable="true" ondragstart="drag(event)" data-deal="michipoten" data-amount="20000">
                            <div class="deal-name">Michipoten First Nation</div>
                            <div class="deal-amount">$20,000</div>
                            <div class="deal-meta">
                                <span>50% probability</span>
                                <span class="deal-prob prob-medium">MED</span>
                            </div>
                        </div>
                    </div>
                    <button class="add-deal-btn">+ Add Deal</button>
                </div>
                
                <!-- February 2026 -->
                <div class="month-column" data-month="feb">
                    <div class="month-header">
                        <div class="month-name">February 2026</div>
                        <div class="month-total" id="feb-column-total">$45,750</div>
                    </div>
                    <div class="deals-container" ondrop="drop(event, 'feb')" ondragover="allowDrop(event)">
                        <div class="deal-card" draggable="true" ondragstart="drag(event)" data-deal="cmto" data-amount="20000">
                            <div class="deal-name">College of Massage Therapists</div>
                            <div class="deal-amount">$20,000</div>
                            <div class="deal-meta">
                                <span>25% probability</span>
                                <span class="deal-prob prob-low">LOW</span>
                            </div>
                        </div>
                        <div class="deal-card" draggable="true" ondragstart="drag(event)" data-deal="mte" data-amount="20000">
                            <div class="deal-name">MTE Coaching</div>
                            <div class="deal-amount">$20,000</div>
                            <div class="deal-meta">
                                <span>25% probability</span>
                                <span class="deal-prob prob-low">LOW</span>
                            </div>
                        </div>
                        <div class="deal-card" draggable="true" ondragstart="drag(event)" data-deal="mazak" data-amount="5800">
                            <div class="deal-name">Mazak Corporation</div>
                            <div class="deal-amount">$5,800</div>
                            <div class="deal-meta">
                                <span>75% probability</span>
                                <span class="deal-prob prob-high">HOT</span>
                            </div>
                        </div>
                    </div>
                    <button class="add-deal-btn">+ Add Deal</button>
                </div>
                
                <!-- March 2026 -->
                <div class="month-column" data-month="mar">
                    <div class="month-header">
                        <div class="month-name">March 2026</div>
                        <div class="month-total" id="mar-column-total">$111,250</div>
                    </div>
                    <div class="deals-container" ondrop="drop(event, 'mar')" ondragover="allowDrop(event)">
                        <div class="deal-card" draggable="true" ondragstart="drag(event)" data-deal="rhi" data-amount="11250">
                            <div class="deal-name">RHI Magnesita</div>
                            <div class="deal-amount">$11,250</div>
                            <div class="deal-meta">
                                <span>25% probability</span>
                                <span class="deal-prob prob-low">LOW</span>
                            </div>
                        </div>
                        <div class="deal-card" draggable="true" ondragstart="drag(event)" data-deal="bcf" data-amount="40000">
                            <div class="deal-name">BCM Insurance</div>
                            <div class="deal-amount">$40,000</div>
                            <div class="deal-meta">
                                <span>50% probability</span>
                                <span class="deal-prob prob-medium">MED</span>
                            </div>
                        </div>
                        <div class="deal-card" draggable="true" ondragstart="drag(event)" data-deal="berq2" data-amount="6559">
                            <div class="deal-name">Berq RNG (Coaching)</div>
                            <div class="deal-amount">$6,559</div>
                            <div class="deal-meta">
                                <span>75% probability</span>
                                <span class="deal-prob prob-high">HOT</span>
                            </div>
                        </div>
                        <div class="deal-card" draggable="true" ondragstart="drag(event)" data-deal="earth" data-amount="14500">
                            <div class="deal-name">Earth Fresh Foods</div>
                            <div class="deal-amount">$14,500</div>
                            <div class="deal-meta">
                                <span>25% probability</span>
                                <span class="deal-prob prob-low">LOW</span>
                            </div>
                        </div>
                        <div class="deal-card" draggable="true" ondragstart="drag(event)" data-deal="jfe" data-amount="14500">
                            <div class="deal-name">JFE Shoji</div>
                            <div class="deal-amount">$14,500</div>
                            <div class="deal-meta">
                                <span>0% probability</span>
                                <span class="deal-prob prob-low">NEW</span>
                            </div>
                        </div>
                        <div class="deal-card" draggable="true" ondragstart="drag(event)" data-deal="ron" data-amount="2500">
                            <div class="deal-name">Ron - Jenna's Dad</div>
                            <div class="deal-amount">$2,500</div>
                            <div class="deal-meta">
                                <span>25% probability</span>
                                <span class="deal-prob prob-low">LOW</span>
                            </div>
                        </div>
                        <div class="deal-card" draggable="true" ondragstart="drag(event)" data-deal="walter" data-amount="5000">
                            <div class="deal-name">WalterFedy</div>
                            <div class="deal-amount">$5,000</div>
                            <div class="deal-meta">
                                <span>25% probability</span>
                                <span class="deal-prob prob-low">LOW</span>
                            </div>
                        </div>
                        <div class="deal-card" draggable="true" ondragstart="drag(event)" data-deal="grand" data-amount="800">
                            <div class="deal-name">Grand River Foods</div>
                            <div class="deal-amount">$800</div>
                            <div class="deal-meta">
                                <span>25% probability</span>
                                <span class="deal-prob prob-low">LOW</span>
                            </div>
                        </div>
                        <div class="deal-card" draggable="true" ondragstart="drag(event)" data-deal="eccles" data-amount="2500">
                            <div class="deal-name">Scott Eccles</div>
                            <div class="deal-amount">$2,500</div>
                            <div class="deal-meta">
                                <span>New deal</span>
                                <span class="deal-prob prob-low">NEW</span>
                            </div>
                        </div>
                    </div>
                    <button class="add-deal-btn">+ Add Deal</button>
                </div>
                
                <!-- Unscheduled -->
                <div class="month-column" data-month="unscheduled">
                    <div class="month-header">
                        <div class="month-name">ðŸ“‹ Unscheduled</div>
                        <div class="month-total zero" id="unscheduled-total">$0</div>
                    </div>
                    <div class="deals-container" ondrop="drop(event, 'unscheduled')" ondragover="allowDrop(event)">
                        <div class="deal-card" draggable="true" ondragstart="drag(event)" data-deal="automotive" data-amount="20000">
                            <div class="deal-name">Automotive Group</div>
                            <div class="deal-amount">$20,000</div>
                            <div class="deal-meta">
                                <span>0% probability</span>
                                <span class="deal-prob prob-low">TBD</span>
                            </div>
                        </div>
                    </div>
                    <button class="add-deal-btn">+ Add Deal</button>
                </div>
            </div>
        </div>
        
        <!-- PIPELINE TAB (simplified) -->
        <div id="pipeline" class="tab-content">
            <div class="header">
                <h1>ðŸ’° Sales Pipeline</h1>
            </div>
            <p style="color: #8b949e;">Switch to the Cash Flow tab for the interactive monthly view!</p>
        </div>
        
        <!-- DASHBOARD TAB -->
        <div id="dashboard" class="tab-content">
            <div class="header">
                <h1>ðŸ“Š Overview</h1>
            </div>
            <p style="color: #8b949e;">Dashboard view - work in progress!</p>
        </div>
    </div>
    
    <script>
        let draggedElement = null;
        let draggedData = null;
        
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
        }
        
        function showQuarter(quarter) {
            // Update button states
            document.querySelectorAll('.quarter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // In a real implementation, this would swap the month columns
            // For now, just show alert
            if (quarter !== 'q1') {
                alert('Q2, Q3, Q4 data coming soon! Currently showing Q1 2026 with sample data.');
            }
        }
        
        function drag(ev) {
            draggedElement = ev.target;
            draggedData = {
                deal: ev.target.dataset.deal,
                amount: parseFloat(ev.target.dataset.amount)
            };
            ev.target.classList.add('dragging');
            ev.dataTransfer.effectAllowed = 'move';
        }
        
        function allowDrop(ev) {
            ev.preventDefault();
            const column = ev.target.closest('.month-column');
            if (column) {
                column.classList.add('drag-over');
            }
        }
        
        function drop(ev, month) {
            ev.preventDefault();
            
            // Remove drag-over styling
            document.querySelectorAll('.month-column').forEach(col => {
                col.classList.remove('drag-over');
            });
            
            if (draggedElement) {
                // Remove dragging class
                draggedElement.classList.remove('dragging');
                
                // Find the deals container in the target month
                const targetColumn = document.querySelector(`.month-column[data-month="${month}"] .deals-container`);
                if (targetColumn) {
                    // Move the element
                    targetColumn.appendChild(draggedElement);
                    
                    // Recalculate totals
                    recalculateTotals();
                }
            }
            
            draggedElement = null;
            draggedData = null;
        }
        
        function recalculateTotals() {
            const months = ['jan', 'feb', 'mar'];
            let q1Total = 0;
            
            months.forEach(month => {
                const column = document.querySelector(`.month-column[data-month="${month}"]`);
                if (column) {
                    const deals = column.querySelectorAll('.deal-card');
                    let monthTotal = 0;
                    
                    deals.forEach(deal => {
                        const amount = parseFloat(deal.dataset.amount) || 0;
                        monthTotal += amount;
                    });
                    
                    // Update column total
                    const totalElement = column.querySelector('.month-total');
                    if (totalElement) {
                        totalElement.textContent = '$' + monthTotal.toLocaleString();
                        if (monthTotal === 0) {
                            totalElement.classList.add('zero');
                        } else {
                            totalElement.classList.remove('zero');
                        }
                    }
                    
                    // Update summary card
                    const summaryElement = document.getElementById(month + '-total');
                    if (summaryElement) {
                        summaryElement.textContent = '$' + monthTotal.toLocaleString();
                    }
                    
                    q1Total += monthTotal;
                }
            });
            
            // Update Q1 total
            const q1Element = document.getElementById('q1-total');
            if (q1Element) {
                q1Element.textContent = '$' + q1Total.toLocaleString();
            }
        }
        
        // Remove drag-over styling when leaving a column
        document.addEventListener('dragleave', function(e) {
            if (e.target.classList.contains('month-column')) {
                e.target.classList.remove('drag-over');
            }
        });
        
        // Initialize
        recalculateTotals();
    </script>
</body>
</html>